<!DOCTYPE html>
<html>
    <head>
        <title>Behat step-definition to verify visibility (not just presence) of Drupal form elements. &mdash; À moi la garde ! &mdash; </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="http://pbuyle.github.io/css/solarized-light-bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="http://pbuyle.github.io/css/style.css" rel="stylesheet" type="text/css" />
        <link href="http://pbuyle.github.io/css/gist_solarized.css" rel="stylesheet" type="text/css" />
        <link href="http://pbuyle.github.io/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="http://pbuyle.github.io/components/highlightjs/styles/solarized_dark.css" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
        <link rel="alternate" type="application/rss+xml" title="À moi la garde !'s RSS Feed" href="http://pbuyle.github.io/feed.xml" />
    </head>
    <body>
        <header>

            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://pbuyle.github.io/">À moi la garde !</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="http://pbuyle.github.io/blog">Archives</a></li>
                        <li><a href="http://pbuyle.github.io/blog/tags">Tags</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </nav>
        </header>
        <div class="mainContent container">
            <div class="col-md-12">
                    <article>
        <header class="page-header">
            <h1>Behat step-definition to verify visibility (not just presence) of Drupal form elements. <small><span class="glyphicon glyphicon-file"></span>post</small></h1>
            <time datetime="2014-04-24T00:00:00-04:00" pubdate>
                <span class='month'>Apr</span> <span class='day'>24th</span> <span class='year'>2014</span>
            </time>
        </header>

                <p class="pull-right tags">
            <span class="glyphicon glyphicon-tags"></span>&nbsp;
                        <a href="http://pbuyle.github.io/blog/tags/drupal">drupal</a>,                         <a href="http://pbuyle.github.io/blog/tags/behat">behat</a>,                         <a href="http://pbuyle.github.io/blog/tags/drupal-7">drupal-7</a>                    </p>
        
        <div>
            <p>In November 2013, I tried Drupal <a href="https://en.wikipedia.org/wiki/Behavior-driven_development">BDD</a> using
<a href="http://behat.org/">Behat</a> and the <a href="https://drupal.org/project/drupalextension">Behat Drupal extension</a>. The experiment
was to apply BDD in order to implement a small feature on an existing site. After a informal discussion about the
feature, the stakeholder wanting it wrote the Cucumber scenarios. As the developer of the feature, I took the
scenarios and started by running them against my test site. And so, my BDD journey started.</p>

<p>The first thing that needed fixing was the scenario itself, off course being the first scenario ever written by its
author, most of the step, while understandable by an human being did not match the pattern expected by Behat (actually
the (Mink)[http://mink.behat.org/] and Drupal extensions). While fixing the steps, I quickly learned that steps to easily
express the visibility of Drupal form element did not exists. So I wrote a couple or steps to check for the
(in)visibility of form element identified by their labels. Writing the steps was the occasion to dig the Behat and Mink
APIs. Most of them requires a (Mink driver)[http://mink.behat.org/#different-browsers-drivers] with support for CSS in
order for the visibility tests on the form element to work. The Goutte driver does not, the Selenium driver does not. I
don't known for others.</p>

<p>The code for these steps is distributed under a MIT-style licence as Gist (embed below). In
(issue 2151935)[https://drupal.org/node/2151935] Another Behat/Drupal enthusiast requested for them to be included . This
would require a bit more work as they currently heavily rely on, what I think is, the default Drupal form markup and have
only been tested in single custom theme. Because we can expect everyone to use default form markup, the code to retrieve
a form element or its label should abstracted to easily overwriteable methods. One of these methods should be used to
retrieve the form labels on the page. Once you have a form label element, you can retrieve its form element using its
<code>for</code> attribute (requiring this attribute is a reasonable requirements). Another method should be used to retrieve the
type (ie. the Drupal form API <code>#type</code>) of a form element.</p>

<script src="https://gist.github.com/pbuyle/7698675.js"></script>

        </div>
    </article>
            </div>
        </div>
        <footer class="container">
            <div class="col-md-9">Powered by <a href="https://sculpin.io">Sculpin</a> - Hosted on <a href="http://pages.github.com/">Github</a> - &copy; <a href="http://about.me/pbuyle">Pierre Buyle</a></small></div>
            <div class="col-md-3"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br />Except where otherwise noted, content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a></div>.
        </footer>

        <script src="http://pbuyle.github.io/components/jquery/jquery.min.js"></script>
        <script src="http://pbuyle.github.io/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-291684-6', 'auto');
            ga('send', 'pageview');
        </script>
                <script src="http://pbuyle.github.io/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
                <!-- AddThis Smart Layers BEGIN -->
        <!-- Go to http://www.addthis.com/get/smart-layers to customize -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=mongolito404"></script>
        <script type="text/javascript">
            addthis.layers({
                'theme' : 'transparent',
                'share' : {
                    'position' : 'left',
                    'numPreferredServices' : 5
                },
                'thankyou' : false
            });
        </script>
        <!-- AddThis Smart Layers END -->
            </body>
</html>
